(this["webpackJsonpspace-traders"]=this["webpackJsonpspace-traders"]||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},145:function(e,t,n){"use strict";n.r(t);var s=n(2),c=n(28),i=n.n(c),a=(n(84),n(10)),o=(n(85),Object(s.createContext)({user:{username:"",credits:0,loans:[],ships:[]},updateUser:function(e){}})),l=Object(s.createContext)({systems:{systems:[]},systemSelected:0,updateSystems:function(e){},selectSystem:function(e){}}),r=Object(s.createContext)({userCred:{username:"",token:""},updateUserCred:function(e){}}),u=(n(86),n(31)),d=n(150),j=n(148),b=n(9),m={ASTEROID:"hsl(0, 0%, 75%)",MOON:"hsl(0, 0%, 41%)",PLANET:"hsl(116, 53%, 30%)",GAS_GIANT:"hsl(180, 100%, 50%)",WORMHOLE:"rgb(255, 255, 255)"},v={ASTEROID:1,MOON:1,PLANET:2,GAS_GIANT:5,WORMHOLE:7.5},O=Object(s.createContext)({celestialIndexer:[],setCelestialIndexer:function(e,t,n){}}),x=n(11),f=n(6),h=(new x.Color(15196364),new x.Vector3(0,0,0),x.FrontSide,x.AdditiveBlending,function(e){var t,n,c=Object(s.useRef)(null),i=Object(s.useState)(!1),o=Object(a.a)(i,2),l=(o[0],o[1]),r=Object(s.useState)(!1),u=Object(a.a)(r,2),d=u[0],j=u[1],x=Object(s.useContext)(O),h=x.celestialIndexer,p=x.setCelestialIndexer;Object(s.useEffect)((function(){p(j,e.index,"setCelestialActive")}),[]);var y=null!==(t=m[e.type])&&void 0!==t?t:"rgb(255,255,255)",S=null!==(n=v[e.type])&&void 0!==n?n:1;return Object(f.jsxs)("mesh",Object(b.a)(Object(b.a)({},e),{},{ref:c,scale:d?1.5*S:S,onClick:function(t){h[e.index].setCelestialDataActive({active:!d,x:t.pageX,y:t.pageY}),j(!d)},onPointerOver:function(e){l(!0)},onPointerOut:function(e){return l(!1)},children:[Object(f.jsx)("sphereGeometry",{args:[1,32,32]}),Object(f.jsx)("meshStandardMaterial",{attach:"material",roughness:.5,color:y})]}))});function p(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}var y=n(79),S=n.n(y),C=n(16),g=(n(97),function(e){var t,n,c=Object(s.useState)({active:!1,x:0,y:0}),i=Object(a.a)(c,2),o=i[0],l=i[1],r=Object(s.useState)(!1),u=Object(a.a)(r,2),d=u[0],j=u[1],b=Object(s.useState)(!1),m=Object(a.a)(b,2),v=m[0],x=m[1],h=Object(s.useState)(!1),y=Object(a.a)(h,2),g=y[0],N=y[1],_=Object(s.useState)({x:0,y:0}),A=Object(a.a)(_,2),M=A[0],k=A[1],w=function(){var e=Object(s.useState)(p()),t=Object(a.a)(e,2),n=t[0],c=t[1];return Object(s.useEffect)((function(){function e(){c(p())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n}(),E=w.height,I=w.width;Object(s.useEffect)((function(){!0===(null===o||void 0===o?void 0:o.active)&&k({x:(null===o||void 0===o?void 0:o.x)/I,y:(null===o||void 0===o?void 0:o.y)/E})}),[o]);var D=Object(s.useContext)(O),H=D.celestialIndexer,T=D.setCelestialIndexer;Object(s.useEffect)((function(){T(l,e.index,"setCelestialDataActive")}),[]);var B=Object(C.useSpring)({opacity:1,reset:!1,delay:0,reverse:d,overflow:"hidden",maxHeight:"0em",from:{maxHeight:"30em"}}),W={zIndex:(null===o||void 0===o?void 0:o.active)?10:-10,opacity:(null===o||void 0===o?void 0:o.active)?1:0},L=Object(s.useRef)(null);return Object(f.jsx)(S.a,{positionOffset:{x:(null===M||void 0===M?void 0:M.x)*I,y:(null===M||void 0===M?void 0:M.y)*E},handle:"span",bounds:{top:-(null===M||void 0===M?void 0:M.y)*E,right:I-(null===M||void 0===M?void 0:M.x)*I-(null===L||void 0===L||null===(t=L.current)||void 0===t?void 0:t.offsetWidth),bottom:E-(null===M||void 0===M?void 0:M.y)*E-(null===L||void 0===L||null===(n=L.current)||void 0===n?void 0:n.offsetHeight),left:-(null===M||void 0===M?void 0:M.x)*I},children:Object(f.jsxs)("div",{ref:L,className:"CelesitalData_Main",id:e.loc.name,style:W,children:[Object(f.jsxs)("div",{className:"CelesitalData_Tab",children:[Object(f.jsx)("span",{children:Object(f.jsx)("div",{className:"CelesitalData_Name",style:{cursor:g?"move":"auto"},onMouseOver:function(){N(!g)},onMouseOut:function(){N(!g)},children:String("[".concat(e.loc.symbol,"] ").concat(e.loc.name))})}),Object(f.jsxs)("div",{className:"CelesitalData_NavBar",children:[Object(f.jsx)("div",{className:"CelesitalData_Mini",onClick:function(){j(!d)},children:d?"-":"\u2610"}),Object(f.jsx)("div",{className:"CelestialData_Quit",style:{backgroundColor:v?"hsl(0, 100%, 75%)":""},onMouseOver:function(){x(!v)},onMouseOut:function(){x(!v)},onClick:function(){l({active:!o.active,x:0,y:0}),H[e.index].setCelestialActive(!1)},children:"X"})]})]}),Object(f.jsxs)(C.animated.div,{style:B,children:[String("Coordinates: (X: ".concat(e.loc.x,", Y: ").concat(e.loc.y,")")),Object(f.jsx)("div",{className:"CelesitalData_SurplusData"})]})]})})}),N=function(e){var t,n,c,i,o=Object(s.useContext)(l).systemSelected,r=Object(s.useState)([]),b=Object(a.a)(r,2),m=b[0],v=b[1],x=null===(t=e.system)||void 0===t||null===(n=t.locations)||void 0===n?void 0:n.map((function(e,t){return Object(f.jsx)(g,{index:t,loc:e},"".concat(e.symbol,"_DATA"))})),p=null===(c=e.system)||void 0===c||null===(i=c.locations)||void 0===i?void 0:i.map((function(e,t){return Object(f.jsx)(h,{index:t,position:[e.x,e.y,0],name:e.name,type:e.type},e.symbol)}));function y(e){var t=e.children,n=Object(s.useContext)(O);return Object(f.jsx)(u.a,{linear:!0,camera:{position:[0,0,200],fov:100},children:Object(f.jsx)(O.Provider,{value:n,children:t})})}return Object(f.jsx)(O.Provider,{value:{celestialIndexer:m,setCelestialIndexer:function(e,t,n){var s,c,i=m,a=null===(s=i[t])||void 0===s?void 0:s.setCelestialActive,o=null===(c=i[t])||void 0===c?void 0:c.setCelestialDataActive;"setCelestialActive"===n?a=e:"setCelestialDataActive"===n&&(o=e);var l={setCelestialActive:a,setCelestialDataActive:o};i[t]=l,v(i)}},children:Object(f.jsxs)("div",{className:"SpaceMap_Main",style:{zIndex:o===e.index?-10:-100},children:[Object(f.jsx)("div",{className:"SpaceMap_Canvas",children:Object(f.jsxs)(y,{children:[Object(f.jsx)("ambientLight",{}),Object(f.jsx)(d.a,{position:[0,0,-300],args:[3e3,3e3,4,4],children:Object(f.jsx)("meshBasicMaterial",{color:"black"})}),Object(f.jsx)(j.a,{radius:100,factor:1,count:300}),p]})}),x]})})},_=function(){var e=Object(s.useContext)(l).systems,t=null===e||void 0===e?void 0:e.systems.map((function(e,t){return Object(f.jsx)(N,{system:e,index:t},e.symbol)}));return Object(f.jsx)(f.Fragment,{children:t})},A=(n(98),function(){var e,t,n=Object(s.useContext)(r),c=n.userCred,i=n.updateUserCred,o=Object(s.useState)(null!==(e=null===c||void 0===c?void 0:c.username)&&void 0!==e?e:""),l=Object(a.a)(o,2),u=l[0],d=l[1],j=Object(s.useState)(null!==(t=null===c||void 0===c?void 0:c.token)&&void 0!==t?t:""),b=Object(a.a)(j,2),m=b[0],v=b[1],O=Object(s.useState)(!1),x=Object(a.a)(O,2),h=x[0],p=x[1],y=Object(s.useState)(!1),S=Object(a.a)(y,2),g=S[0],N=S[1],_=Object(s.useState)(!1),A=Object(a.a)(_,2),M=A[0],k=A[1];Object(s.useEffect)((function(){k(!0)}),[]);var w=Object(C.useSpring)({opacity:M?1:0,reset:!1,delay:0,reverse:!g,overflow:"hidden",maxWidth:M?"30em":"0em",maxHeight:M?"30em":"0em",from:{maxWidth:M?"0em":"30em",maxHeight:M?"0em":"30em"}});return Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{type:"button",defaultValue:"".concat(null===c||void 0===c?void 0:c.username,g?" \u25b2":" \u25bc"),onClick:function(){N(!g)}}),Object(f.jsxs)(C.animated.div,{style:w,children:[Object(f.jsx)("label",{htmlFor:"user",children:"Username: "}),Object(f.jsx)("input",{className:"UserCredentials_Text",id:"user",type:"text",onChange:function(e){d(e.target.value)},placeholder:u}),Object(f.jsx)("br",{}),Object(f.jsx)("label",{htmlFor:"toke",children:"Token: "}),Object(f.jsx)("input",{className:"UserCredentials_Text",id:"toke",type:h?"password":"text",onChange:function(e){v(e.target.value)},value:m}),Object(f.jsx)("input",{className:"UserCredentials_Button",id:"toke",type:"button",value:h?"Show":"Hide",onClick:function(){p(!h)}}),Object(f.jsx)("br",{}),Object(f.jsx)("input",{className:"UserCredentials_Button",id:"submit",type:"button",defaultValue:"Submit",onClick:function(){i({username:"".concat(u),token:"".concat(m)})}})]})]})}),M=function(){var e,t,n,c=Object(s.useContext)(l),i=c.systems,o=c.systemSelected,r=c.selectSystem,u=Object(s.useState)(!1),d=Object(a.a)(u,2),j=d[0],b=d[1],m=Object(s.useState)(!1),v=Object(a.a)(m,2),O=v[0],x=v[1];Object(s.useEffect)((function(){x(!0)}),[]);var h=Object(C.useSpring)({opacity:O?1:0,reset:!1,delay:0,reverse:!j,overflow:"hidden",maxWidth:O?"30em":"0em",maxHeight:O?"30em":"0em",from:{maxWidth:O?"0em":"30em",maxHeight:O?"0em":"30em"}}),p=null===i||void 0===i||null===(e=i.systems)||void 0===e?void 0:e.map((function(e,t){return Object(f.jsx)("input",{className:"SelectSystem_Button",type:"Button",defaultValue:e.name,onClick:function(){r(t)}},e.name)}));return Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{className:"SelectSystem_Button",type:"Button",defaultValue:j?"Select System \u25b2: ".concat(null===i||void 0===i||null===(t=i.systems[o])||void 0===t?void 0:t.name):"Select System \u25bc: ".concat(null===i||void 0===i||null===(n=i.systems[o])||void 0===n?void 0:n.name),onClick:function(){b(!j)}}),Object(f.jsx)(C.animated.div,{style:h,children:p})]})},k=(n(99),function(e){var t,n=Object(s.useState)(!1),c=Object(a.a)(n,2),i=c[0],l=c[1],r=Object(s.useState)(!1),u=Object(a.a)(r,2),d=u[0],j=u[1];Object(s.useEffect)((function(){j(!0)}),[]);var b=Object(C.useSpring)({opacity:d?1:0,reset:!1,delay:0,reverse:!i,overflow:"hidden",maxWidth:d?"30em":"0em",maxHeight:d?"30em":"0em",from:{maxWidth:d?"0em":"30em",maxHeight:d?"0em":"30em"}}),m=Object(s.useContext)(o).user,v=null===m||void 0===m||null===(t=m.ships)||void 0===t?void 0:t.map((function(e){return Object(f.jsxs)("div",{className:"Ships_Singular",children:["ID: ",e.id,Object(f.jsx)("br",{}),"Type: ",e.type,Object(f.jsx)("br",{}),"Location: ",e.location,Object(f.jsx)("br",{}),"Cargo: ",e.maxCargo-e.spaceAvailable," / ",e.maxCargo,Object(f.jsx)("br",{}),"Speed: ",e.speed,Object(f.jsx)("br",{}),"Plating: ",e.plating,Object(f.jsx)("br",{}),"Weapons: ",e.weapons,Object(f.jsx)("br",{})]},e.id)}));return Object(f.jsxs)("div",{className:"Ships_Main",children:[Object(f.jsx)("input",{className:"Ships_Button",type:"button",onClick:function(){l(!i)},value:i?"Ships \u25b2":"Ships \u25bc"}),Object(f.jsx)(C.animated.div,{style:b,children:Object(f.jsx)("div",{className:"Ships_Grid",children:v})})]})}),w=(n(100),function(e){var t,n=Object(s.useContext)(l),c=n.systems,i=n.systemSelected,o=Object(s.useState)(!1),r=Object(a.a)(o,2),u=r[0],d=r[1],j=Object(s.useState)(!1),b=Object(a.a)(j,2),m=b[0],v=b[1];Object(s.useEffect)((function(){v(!0)}),[]);var O=Object(C.useSpring)({opacity:m?1:0,reset:!1,delay:0,reverse:!u,overflow:"hidden",maxWidth:m?"30em":"0em",maxHeight:m?"30em":"0em",from:{maxWidth:m?"0em":"30em",maxHeight:m?"0em":"30em"}}),x=null===c||void 0===c||null===(t=c.systems[i])||void 0===t?void 0:t.locations.map((function(e){return Object(f.jsx)("div",{children:e.name},e.symbol)}));return Object(f.jsxs)("div",{className:"Locations_Main",children:[Object(f.jsx)("input",{type:"button",onClick:function(){d(!u)},value:u?"Locations \u25b2":"Locations \u25bc"}),Object(f.jsx)(C.animated.div,{style:O,children:x})]})}),E=function(){return Object(f.jsx)("div",{className:"NavBar_Main",children:Object(f.jsxs)("div",{className:"NavBar_Buttons",children:[Object(f.jsx)(A,{}),Object(f.jsx)(M,{}),Object(f.jsx)(k,{}),Object(f.jsx)(w,{})]})})},I=(n(101),function(){var e=Object(s.useState)(!1),t=Object(a.a)(e,2),n=t[0],c=t[1],i=Object(s.useState)(!1),l=Object(a.a)(i,2),r=l[0],u=l[1];Object(s.useEffect)((function(){u(!0)}),[]);var d=Object(C.useSpring)({zIndex:10,opacity:r?1:0,reset:!1,delay:0,reverse:!n,overflow:"hidden",maxWidth:r?"30em":"0em",maxHeight:r?"30em":"0em",from:{maxWidth:r?"0em":"30em",maxHeight:r?"0em":"30em"}});return Object(f.jsx)(o.Consumer,{children:function(e){var t=e.user;return Object(f.jsxs)("div",{className:"Money_Main",children:[Object(f.jsxs)("div",{className:"Money_Credits",onClick:function(){c(!n)},children:["Credits: ",null===t||void 0===t?void 0:t.credits]}),Object(f.jsx)(C.animated.div,{style:d,children:"words"})]})}})}),D=n(149);function H(e){var t=Object(s.useState)(function(e){return JSON.parse(localStorage.getItem(e))}(e));return Object(s.useEffect)((function(){localStorage.setItem(e,JSON.stringify(t[0]))}),[e,t]),t}function T(e){var t=Object(s.useState)(function(e){return JSON.parse(sessionStorage.getItem(e))}(e));return Object(s.useEffect)((function(){sessionStorage.setItem(e,JSON.stringify(t[0]))}),[e,t]),t}var B=n(80),W=n(52),L=new B.SpaceTraders,P=function(){var e,t,n=Object(D.a)(["session"]),c=Object(a.a)(n,3),i=c[0],u=c[1],d=(c[2],null!==(e=i.session)&&void 0!==e?e:null),j=H("user"),b=Object(a.a)(j,2),m=b[0],v=b[1],O=Object(s.useState)(!1),x=Object(a.a)(O,2);x[0],x[1];try{m.username&&L.init(m.username,m.token)}catch(P){W.AuthenticationError}var h=T("user"),p=Object(a.a)(h,2),y=p[0],S=p[1],C=T("systems"),g=Object(a.a)(C,2),N=g[0],A=g[1],M=null!==(t=T("systemSelected"))&&void 0!==t?t:0,k=Object(a.a)(M,2),w=k[0],B=k[1];return Object(s.useEffect)((function(){m&&(null!==y&&null!==d||L.getAccount().then((function(e){console.log(e),S(e.user)})),null!==N&&null!==d||L.listSystems().then((function(e){console.log(e),A(e)}))),null===d&&u("session","",{path:"/ ",maxAge:900}),L.getMarketplace("OE-PM-TR").then((function(e){console.log(e)}))}),[m,N,y,d]),Object(f.jsx)(r.Provider,{value:{userCred:m,updateUserCred:v},children:Object(f.jsx)(o.Provider,{value:{user:y,updateUser:function(e){m&&L.getAccount().then((function(e){console.log(e.user),S(e.user)}))}},children:Object(f.jsx)(l.Provider,{value:{systems:N,updateSystems:function(e){m&&L.listSystems().then((function(e){console.log(e),A(e)}))},systemSelected:w,selectSystem:B},children:Object(f.jsxs)("div",{className:"Main",children:[Object(f.jsx)(_,{}),Object(f.jsxs)("div",{className:"Main_ResponsiveGrid",children:[Object(f.jsx)(E,{}),Object(f.jsx)(I,{})]})]})})})})},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,151)).then((function(t){var n=t.getCLS,s=t.getFID,c=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),s(e),c(e),i(e),a(e)}))};i.a.render(Object(f.jsx)(P,{}),document.getElementById("root")),U()},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},97:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){}},[[145,1,2]]]);
//# sourceMappingURL=main.051c81a8.chunk.js.map