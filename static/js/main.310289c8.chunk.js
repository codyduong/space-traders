(this["webpackJsonpspace-traders"]=this["webpackJsonpspace-traders"]||[]).push([[0],{138:function(e,t,n){},139:function(e,t,n){},140:function(e,t,n){},141:function(e,t,n){},142:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){"use strict";n.r(t);var s=n(2),c=n(28),i=n.n(c),a=n(10),o=Object(s.createContext)({user:{username:"",credits:0,loans:[],ships:[]},updateUser:function(e){}}),l=Object(s.createContext)({systems:{systems:[]},systemSelected:0,updateSystems:function(e){},selectSystem:function(e){}}),r=Object(s.createContext)({userCred:{username:"",token:""},updateUserCred:function(e){}}),u=n(31),d=n(149),j=n(147),b=n(9),m={ASTEROID:"hsl(0, 0%, 75%)",MOON:"hsl(0, 0%, 41%)",PLANET:"hsl(116, 53%, 30%)",GAS_GIANT:"hsl(180, 100%, 50%)",WORMHOLE:"rgb(255, 255, 255)"},O={ASTEROID:1,MOON:1,PLANET:2,GAS_GIANT:5,WORMHOLE:7.5},v=n(11),f=n(6),x=(new v.Color(15196364),new v.Vector3(0,0,0),v.FrontSide,v.AdditiveBlending,Object(s.createContext)({state:{},set:function(e,t,n){}})),h=function(e){var t,n,c=Object(s.useRef)(null),i=Object(s.useState)(!1),o=Object(a.a)(i,2),l=(o[0],o[1]),r=Object(s.useState)(!1),u=Object(a.a)(r,2),d=u[0],j=u[1],v=Object(s.useContext)(x),h=v.state,y=v.set,p=function(e){return null===e?d:(j(e),null)};Object(s.useEffect)((function(){y(e.loc.symbol,"setCelestialActive",p)}),[]);var g=null!==(t=m[e.type])&&void 0!==t?t:"rgb(255,255,255)",S=null!==(n=O[e.type])&&void 0!==n?n:1;return Object(f.jsxs)("mesh",Object(b.a)(Object(b.a)({},e),{},{ref:c,scale:d?1.5*S:S,onClick:function(t){h[e.loc.symbol].setLocationActive(!d),h[e.loc.symbol].setCelestialActive(!d),h[e.loc.symbol].setCelestialDataActive(!d),h[e.loc.symbol].setCelestialDataPosition({x:t.pageX,y:t.pageY}),j(!d)},onPointerOver:function(e){l(!0)},onPointerOut:function(e){return l(!1)},children:[Object(f.jsx)("sphereGeometry",{args:[1,32,32]}),Object(f.jsx)("meshStandardMaterial",{attach:"material",roughness:.5,color:g})]}))};function y(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}var p=n(79),g=n.n(p),S=n(16),C=(n(93),n.p+"static/media/chevron-bar-down.9fce45e6.svg"),N=n.p+"static/media/chevron-bar-up.6e25079b.svg",w=function(e){var t,n,c=Object(s.useState)(!1),i=Object(a.a)(c,2),o=i[0],l=i[1],r=Object(s.useState)({x:0,y:0}),u=Object(a.a)(r,2),d=u[0],j=u[1],b=Object(s.useState)(!1),m=Object(a.a)(b,2),O=m[0],v=m[1],h=function(){var e=Object(s.useState)(y()),t=Object(a.a)(e,2),n=t[0],c=t[1];return Object(s.useEffect)((function(){function e(){c(y())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n}(),p=h.height,w=h.width,A=function(e){return null===e?o:(l(e),null)},k=function(e){return null===e?d:(j(e),null)},E=Object(s.useContext)(x),H=E.state,T=E.set;Object(s.useEffect)((function(){T(e.loc.symbol,"setCelestialDataActive",A),T(e.loc.symbol,"setCelestialDataPosition",k)}),[]);var L=Object(S.useSpring)({opacity:1,reset:!1,delay:0,reverse:O,overflow:"hidden",maxHeight:"0em",from:{maxHeight:"30em"}}),I={zIndex:o?10:-20,opacity:o?1:0},P=Object(s.useRef)(null);return Object(f.jsx)(g.a,{position:d,onDrag:function(e,t){var n=t.x,s=t.y;j({x:n,y:s})},handle:"span",bounds:{top:0,right:w-(null===P||void 0===P||null===(t=P.current)||void 0===t?void 0:t.offsetWidth),bottom:p-(null===P||void 0===P||null===(n=P.current)||void 0===n?void 0:n.offsetHeight),left:0},children:Object(f.jsxs)("div",{ref:P,className:"celestialdata-main",id:e.loc.name,style:I,children:[Object(f.jsxs)("div",{className:"celestialdata-tab",children:[Object(f.jsx)("span",{children:Object(f.jsx)("div",{className:"celestialdata-name",children:String("[".concat(e.loc.symbol,"] ").concat(e.loc.name))})}),Object(f.jsxs)("div",{className:"celestialdata-navbar",children:[Object(f.jsx)("div",{className:"celestialdata-mini",onClick:function(){v(!O)},children:O?Object(f.jsx)("img",{src:N,alt:"\u25b2"}):Object(f.jsx)("img",{src:C,alt:"\u25bc"})}),Object(f.jsx)("div",{className:"celestialdata-quit",onClick:function(){H[e.loc.symbol].setLocationActive(!1),H[e.loc.symbol].setCelestialActive(!1),l(!1)},children:"X"})]})]}),Object(f.jsx)(S.animated.div,{style:L,children:Object(f.jsxs)("div",{className:"celestialdata-data",children:[Object(f.jsx)("div",{className:"celestialdata-doordinates",children:String("".concat(e.loc.x,", ").concat(e.loc.y))}),Object(f.jsx)("div",{className:"celestialdata-construction",children:String("Build: ".concat(e.loc.allowsConstruction))})]})})]})})},A=(n(94),function(e){var t,n,c,i,a=Object(s.useContext)(l).systemSelected,o=null===(t=e.system)||void 0===t||null===(n=t.locations)||void 0===n?void 0:n.map((function(e,t){return Object(f.jsx)(w,{index:t,loc:e},"".concat(e.symbol,"_DATA"))})),r=null===(c=e.system)||void 0===c||null===(i=c.locations)||void 0===i?void 0:i.map((function(e,t){return Object(f.jsx)(h,{index:t,position:[e.x,e.y,0],name:e.name,type:e.type,loc:e},e.symbol)}));function b(e){var t=e.children,n=Object(s.useContext)(x);return Object(f.jsx)(u.a,{linear:!0,camera:{position:[0,0,200],fov:100},children:Object(f.jsx)(x.Provider,{value:n,children:t})})}return Object(f.jsxs)("div",{className:"spacemap-main",style:{zIndex:a===e.index?-10:-100},children:[Object(f.jsx)("div",{className:"spacemap-canvas",children:Object(f.jsxs)(b,{children:[Object(f.jsx)("ambientLight",{}),Object(f.jsx)(d.a,{position:[0,0,-300],args:[3e3,3e3,4,4],children:Object(f.jsx)("meshBasicMaterial",{color:"black"})}),Object(f.jsx)(j.a,{radius:100,factor:1,count:300}),r]})}),o]})}),k=function(){var e=Object(s.useContext)(l).systems,t=null===e||void 0===e?void 0:e.systems.map((function(e,t){return Object(f.jsx)(A,{system:e,index:t},e.symbol)}));return Object(f.jsx)(f.Fragment,{children:t})},E=n(45),H=function(e){var t=e.search(/[0-9]{3}/g);return-1===t?"":e.slice(t)},T=new E.SpaceTraders,L=function(){var e,t,n=Object(s.useContext)(r),c=n.userCred,i=n.updateUserCred,o=Object(s.useState)(null!==(e=null===c||void 0===c?void 0:c.username)&&void 0!==e?e:""),l=Object(a.a)(o,2),u=l[0],d=l[1],j=Object(s.useState)(null!==(t=null===c||void 0===c?void 0:c.token)&&void 0!==t?t:""),b=Object(a.a)(j,2),m=b[0],O=b[1],v=Object(s.useState)(!1),x=Object(a.a)(v,2),h=x[0],y=x[1],p=Object(s.useState)(!1),g=Object(a.a)(p,2),C=g[0],N=g[1],w=Object(s.useState)(!1),A=Object(a.a)(w,2),k=A[0],E=A[1];Object(s.useEffect)((function(){E(!0)}),[]);var L=Object(S.useSpring)({opacity:k?1:0,reset:!1,delay:0,reverse:!C,overflow:"hidden",maxWidth:k?"30em":"0em",maxHeight:k?"30em":"0em",from:{maxWidth:k?"0em":"30em",maxHeight:k?"0em":"30em"}});return Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{type:"button",defaultValue:"".concat(null===c||void 0===c?void 0:c.username,C?" \u25b2":" \u25bc"),onClick:function(){N(!C)}}),Object(f.jsxs)(S.animated.div,{style:L,children:[Object(f.jsx)("label",{htmlFor:"user",children:"Username: "}),Object(f.jsx)("input",{className:"UserCredentials_Text",id:"user",type:"text",onChange:function(e){d(e.target.value)},placeholder:u}),Object(f.jsx)("br",{}),Object(f.jsx)("label",{htmlFor:"toke",children:"Token: "}),Object(f.jsx)("input",{className:"UserCredentials_Text",id:"toke",type:h?"password":"text",onChange:function(e){O(e.target.value)},value:m}),Object(f.jsx)("input",{className:"UserCredentials_Button",id:"toke",type:"button",value:h?"Show":"Hide",onClick:function(){y(!h)}}),Object(f.jsx)("br",{}),Object(f.jsx)("input",{className:"UserCredentials_Button",id:"submit",type:"button",defaultValue:"Submit",onClick:function(){i({username:"".concat(u),token:"".concat(m)})}}),Object(f.jsx)("input",{className:""===m?"UserCredentials_Button":"UserCredentials_Button tooltip",id:"submit",type:"button",defaultValue:"Register User",disabled:""!==m||""===u,title:""!==u?""===m?"":"Token field must be null":"Username cannot be null",onClick:function(){T.init(u).then((function(e){console.log(e),O(e),i({username:"".concat(u),token:e})})).catch((function(e){if(console.log(e.message),console.log(H(e.message)),"409"!==H(e.message))throw e;alert("This user is already registered")}))}})]})]})},I=function(){var e,t,n,c=Object(s.useContext)(l),i=c.systems,o=c.systemSelected,r=c.selectSystem,u=Object(s.useState)(!1),d=Object(a.a)(u,2),j=d[0],b=d[1],m=Object(s.useState)(!1),O=Object(a.a)(m,2),v=O[0],x=O[1];Object(s.useEffect)((function(){x(!0)}),[]);var h=Object(S.useSpring)({opacity:v?1:0,reset:!1,delay:0,reverse:!j,overflow:"hidden",maxWidth:v?"30em":"0em",maxHeight:v?"30em":"0em",from:{maxWidth:v?"0em":"30em",maxHeight:v?"0em":"30em"}}),y=null===i||void 0===i||null===(e=i.systems)||void 0===e?void 0:e.map((function(e,t){return Object(f.jsx)("input",{className:"SelectSystem_Button",type:"Button",defaultValue:e.name,onClick:function(){r(t)}},e.name)}));return Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{className:"SelectSystem_Button",type:"Button",defaultValue:j?"Select System \u25b2: ".concat(null===i||void 0===i||null===(t=i.systems[o])||void 0===t?void 0:t.name):"Select System \u25bc: ".concat(null===i||void 0===i||null===(n=i.systems[o])||void 0===n?void 0:n.name),onClick:function(){b(!j)}}),Object(f.jsx)(S.animated.div,{style:h,children:y})]})},P=(n(138),function(e){var t,n=Object(s.useState)(!1),c=Object(a.a)(n,2),i=c[0],l=c[1],r=Object(s.useState)(!1),u=Object(a.a)(r,2),d=u[0],j=u[1];Object(s.useEffect)((function(){j(!0)}),[]);var b=Object(S.useSpring)({opacity:d?1:0,reset:!1,delay:0,reverse:!i,overflow:"hidden",maxWidth:d?"30em":"0em",maxHeight:d?"30em":"0em",from:{maxWidth:d?"0em":"30em",maxHeight:d?"0em":"30em"}}),m=Object(s.useContext)(o).user,O=null===m||void 0===m||null===(t=m.ships)||void 0===t?void 0:t.map((function(e){return Object(f.jsxs)("div",{className:"ships-singular",children:["ID: ",e.id,Object(f.jsx)("br",{}),"Type: ",e.type,Object(f.jsx)("br",{}),"Location: ",e.location,Object(f.jsx)("br",{}),"Cargo: ",e.maxCargo-e.spaceAvailable," / ",e.maxCargo,Object(f.jsx)("br",{}),"Speed: ",e.speed,Object(f.jsx)("br",{}),"Plating: ",e.plating,Object(f.jsx)("br",{}),"Weapons: ",e.weapons,Object(f.jsx)("br",{})]},e.id)}));return Object(f.jsxs)("div",{className:"ships-main",children:[Object(f.jsx)("input",{className:"ships-button",type:"button",onClick:function(){l(!i)},value:i?"Ships \u25b2":"Ships \u25bc"}),Object(f.jsx)(S.animated.div,{style:b,children:Object(f.jsx)("div",{className:"ships-grid",children:O})})]})}),W=(n(139),function(e){var t=Object(s.useState)(!1),n=Object(a.a)(t,2),c=n[0],i=n[1],o=Object(s.useContext)(x),l=o.state,r=o.set;return Object(s.useEffect)((function(){r(e.location.symbol,"setLocationActive",i)}),[]),Object(f.jsxs)("div",{children:[e.location.name,Object(f.jsx)("input",{style:{float:"right"},type:"button",value:"Select",onClick:function(t){l[e.location.symbol].setCelestialActive(!c),l[e.location.symbol].setCelestialDataActive(!c),l[e.location.symbol].setCelestialDataPosition({x:t.pageX+30,y:t.pageY}),i(!c)}})]},e.location.symbol)}),U=function(e){var t,n=Object(s.useContext)(l),c=n.systems,i=n.systemSelected,o=Object(s.useState)(!1),r=Object(a.a)(o,2),u=r[0],d=r[1],j=Object(s.useState)(!1),b=Object(a.a)(j,2),m=b[0],O=b[1];Object(s.useEffect)((function(){O(!0)}),[]);var v=Object(S.useSpring)({opacity:m?1:0,reset:!1,delay:0,reverse:!u,overflow:"hidden",maxWidth:m?"30em":"0em",maxHeight:m?"30em":"0em",from:{maxWidth:m?"0em":"30em",maxHeight:m?"0em":"30em"}}),x=null===c||void 0===c||null===(t=c.systems[i])||void 0===t?void 0:t.locations.map((function(e){return Object(f.jsx)(W,{location:e})}));return Object(f.jsxs)("div",{className:"Locations_Main",children:[Object(f.jsx)("input",{type:"button",onClick:function(){d(!u)},value:u?"Locations \u25b2":"Locations \u25bc"}),Object(f.jsx)(S.animated.div,{style:v,children:x})]})},B=(n(140),function(){return Object(f.jsx)("div",{className:"navbar-main",children:Object(f.jsxs)("div",{className:"navbar_buttons",children:[Object(f.jsx)(L,{}),Object(f.jsx)(I,{}),Object(f.jsx)(P,{}),Object(f.jsx)(U,{})]})})}),_=(n(141),function(){var e=Object(s.useState)(!1),t=Object(a.a)(e,2),n=t[0],c=t[1],i=Object(s.useState)(!1),l=Object(a.a)(i,2),r=l[0],u=l[1];Object(s.useEffect)((function(){u(!0)}),[]);var d=Object(S.useSpring)({zIndex:10,opacity:r?1:0,reset:!1,delay:0,reverse:!n,overflow:"hidden",maxWidth:r?"30em":"0em",maxHeight:r?"30em":"0em",from:{maxWidth:r?"0em":"30em",maxHeight:r?"0em":"30em"}});return Object(f.jsx)(o.Consumer,{children:function(e){var t=e.user;return Object(f.jsxs)("div",{className:"money-main",children:[Object(f.jsxs)("div",{className:"money-credits",onClick:function(){c(!n)},children:["Credits: ",null===t||void 0===t?void 0:t.credits]}),Object(f.jsx)(S.animated.div,{style:d,children:"words"})]})}})}),D=n(148);function F(e){var t=Object(s.useState)(function(e){return JSON.parse(localStorage.getItem(e))}(e));return Object(s.useEffect)((function(){localStorage.setItem(e,JSON.stringify(t[0]))}),[e,t]),t}function M(e){var t=Object(s.useState)(function(e){return JSON.parse(sessionStorage.getItem(e))}(e));return Object(s.useEffect)((function(){sessionStorage.setItem(e,JSON.stringify(t[0]))}),[e,t]),t}var R=n(52),J=(n(142),new E.SpaceTraders),V=function(){var e,t=Object(D.a)(["session"]),n=Object(a.a)(t,3),c=n[0],i=n[1],u=(n[2],null!==(e=c.session)&&void 0!==e?e:null),d=F("user"),j=Object(a.a)(d,2),b=j[0],m=j[1],O=Object(s.useState)(!1),v=Object(a.a)(O,2);v[0],v[1];try{b.username&&J.init(b.username,b.token)}catch(U){R.AuthenticationError}var h=M("user"),y=Object(a.a)(h,2),p=y[0],g=y[1],S=M("systems"),C=Object(a.a)(S,2),N=C[0],w=C[1],A=M("systemSelected"),E=Object(a.a)(A,2),H=E[0],T=E[1];Object(s.useEffect)((function(){b&&(null!==p&&null!==u||J.getAccount().then((function(e){console.log(e),g(e.user)})),null!==N&&null!==u||J.listSystems().then((function(e){console.log(e),w(e)}))),null===u&&(i("session","",{path:"/ ",maxAge:900}),setInterval((function(){i("session",null,{path:"/ ",maxAge:-1})}),9e5)),null===H&&T(0)}),[b,N,p,u]);var L=Object(s.useState)({}),I=Object(a.a)(L,2),P=I[0],W=I[1];return Object(f.jsx)(r.Provider,{value:{userCred:b,updateUserCred:m},children:Object(f.jsx)(o.Provider,{value:{user:p,updateUser:function(){b&&J.getAccount().then((function(e){console.log(e.user),g(e.user)}))}},children:Object(f.jsx)(l.Provider,{value:{systems:N,updateSystems:function(e){b&&J.listSystems().then((function(e){console.log(e),w(e)}))},systemSelected:H,selectSystem:T},children:Object(f.jsx)(x.Provider,{value:{state:P,set:function(e,t,n){var s,c=P;c[e]=null!==(s=P[e])&&void 0!==s?s:{},c[e][t]=n,W(c)}},children:Object(f.jsxs)("div",{className:"main",children:[Object(f.jsx)(k,{}),Object(f.jsxs)("div",{className:"main-grid",children:[Object(f.jsx)(B,{}),Object(f.jsx)(_,{})]})]})})})})})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,150)).then((function(t){var n=t.getCLS,s=t.getFID,c=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),s(e),c(e),i(e),a(e)}))};n(143);i.a.render(Object(f.jsx)(V,{}),document.getElementById("root")),z()},93:function(e,t,n){},94:function(e,t,n){}},[[144,1,2]]]);
//# sourceMappingURL=main.310289c8.chunk.js.map